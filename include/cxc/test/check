#pragma once

#include <cxc/test/fail>
#include <cxc/test/scope>

namespace cxc
{
    namespace test
    {
        template <typename value_type>
        class check
        {
        public:
            check(const value_type& value, const scope& source, const char* file, int line)
                : m_value(value)
            {
            }

            void ensure(bool result, const std::string& message)
            {
                if (!result)
                    throw fail(message, file, line);
            }

        private:
            const value_type& m_value;
            const scope& m_source;
            const char* file;
            int line;
        };
    }
}
